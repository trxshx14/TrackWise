{% extends "dashboard/business_owner_dashboard.html" %}
{% load static %}

{% block title %}TrackWise - Reports Dashboard{% endblock %}

{% block extra_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'css/reports/reports_dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="reports-wrapper">
    <div class="container-fluid">
        <!-- Header Section -->
        <div class="reports-header">
            <div class="header-content">
                <h1 class="welcome-text">
                    <i class="fas fa-chart-bar"></i>
                    Reports Dashboard
                </h1>
                <p class="subtitle">Generate and view various reports for your business analytics</p>
            </div>
            
            <div class="header-actions">
                <div></div> <!-- Empty div for spacing -->
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">Staff</div>
                <div class="stat-label">Activity & Metrics</div>
                <i class="stat-icon fas fa-users"></i>
            </div>
            <div class="stat-card">
                <div class="stat-number">Inventory</div>
                <div class="stat-label">Stock & Levels</div>
                <i class="stat-icon fas fa-boxes"></i>
            </div>
            <div class="stat-card">
                <div class="stat-number">Export</div>
                <div class="stat-label">Multiple Formats</div>
                <i class="stat-icon fas fa-file-export"></i>
            </div>
        </div>

        <!-- Reports Grid -->
        <div class="reports-grid">
            <!-- Staff Activity Card -->
            <div class="report-card">
                <div class="report-header">
                    <h3 class="report-title">
                        <i class="fas fa-user-clock"></i>
                        Staff Activity Report
                    </h3>
                </div>
                <p class="report-description">
                    View staff activity summaries, login times, task completion rates, and performance metrics.
                </p>
                <ul class="report-features">
                    <li><i class="fas fa-check"></i>Activity tracking</li>
                    <li><i class="fas fa-check"></i>Performance metrics</li>
                    <li><i class="fas fa-check"></i>Time-based analysis</li>
                </ul>
                <a href="{% url 'reports:staff_activity' %}" class="report-btn">
                    <i class="fas fa-chart-line"></i>View Activity Report
                </a>
            </div>

            <!-- Inventory Report Card -->
            <div class="report-card">
                <div class="report-header">
                    <h3 class="report-title">
                        <i class="fas fa-boxes-stacked"></i>
                        Inventory Report
                    </h3>
                </div>
                <p class="report-description">
                    Comprehensive inventory reports including stock levels, low stock alerts, and inventory movements.
                </p>
                <ul class="report-features">
                    <li><i class="fas fa-check"></i>Stock level monitoring</li>
                    <li><i class="fas fa-check"></i>Low stock alerts</li>
                    <li><i class="fas fa-check"></i>Movement tracking</li>
                </ul>
                <a href="{% url 'reports:inventory_report' %}" class="report-btn">
                    <i class="fas fa-boxes"></i>Check Inventory Report
                </a>
            </div>
        </div>

        <!-- Recent Reports Section -->
        {% if recent_reports %}
        <div class="recent-reports-section">
            <div class="section-card">
                <h3 class="section-title">
                    <i class="fas fa-history"></i>
                    Recently Generated Reports
                </h3>
                <div class="table-responsive">
                    <table class="reports-table">
                        <thead>
                            <tr>
                                <th>Report Name</th>
                                <th>Generated On</th>
                                <th>Format</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for report in recent_reports %}
                            <tr>
                                <td>{{ report.report_config.name }}</td>
                                <td>{{ report.generated_at|date:"M d, Y H:i" }}</td>
                                <td>
                                    <span class="format-badge">{{ report.file_format|upper }}</span>
                                </td>
                                <td>
                                    {% if report.file_path %}
                                    <a href="{{ report.file_path }}" class="download-btn">
                                        <i class="fas fa-download"></i>Download
                                    </a>
                                    {% else %}
                                    <span style="color: #999;">Not available</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}